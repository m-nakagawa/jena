<!DOCTYPE html>
<!-- 日本語 -->
<html>
  <!-- MNakagawa -->
  <head>
    <title>test websocket</title>
  </head>
  <body>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!--<script src="js/jquery-1.11.3.min.js"></script>-->
    <script type="text/javascript">
    console.log("Start");
    path1 ='ws://localhost:3030/fos/test01/read/path/温度?test=123'
    path2 ='ws://localhost:3030/fos/test01/update/path/2F/居間/温度'
    var ws = new WebSocket(path1);
    //var ws = new WebSocket('ws://localhost:3030/fos/test01/update/id/1');

ws.onopen = function () {
    console.log("Connecting is success!!");
};

cnt = 1

ws.onmessage = function (me) {
    var receivedData = me.data;
    console.log("Message is exists!!");
    console.log("recievedData: " + receivedData);
    try {
      var j = $.parseJSON(receivedData);
      var tgt = "div#w"+j.id;
      console.log(tgt);
      $(tgt).text(receivedData);
      if(j.id == 9){
        ws2.send('{"値":'+cnt+'}')
      }
      cnt = cnt+1
    }catch(e){
      console.log(e)
      //alert(e);
    }
};

ws.onclose = function (me) {
   console.log("Colosed")
}

var ws2 = new WebSocket(path2)

ws2.onopen = function () {
    console.log("2 Connecting is success!!");
    ws.send('{"値":"abc"}}');
};

ws2.onmessage = function (me) {
    var receivedData = me.data;
    console.log("Message is exists!!");
    console.log("recievedData: " + receivedData);
    //var j = $.parseJSON(receivedData);
    // console.log("id:"+j.id);
    //$("div#w2").text(receivedData);
};

ws2.onclose = function (me) {
   console.log("2Colosed")
}
    </script>

   <p>test</p>
   <p><div  id="w1"></div></p>
   <p><div  id="w2"></div></p>
   <p><div  id="w3"></div></p>
   <p><div  id="w4"></div></p>
   <p><div  id="w5"></div></p>
   <p><div  id="w6"></div></p>
   <p><div  id="w7"></div></p>
   <p><div  id="w8"></div></p>
   <p><div  id="w9"></div></p>
   </body>
</html>
